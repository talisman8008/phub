/**
 * PlayStation Reimagined - Master Stylesheet
 * Optimized for ASUS TUF F15 High-Refresh Display
 */

/* --- 1. Core Reset & Custom Scrollbar --- */
*, *::before, *::after {
    box-sizing: border-box;
    cursor: url('https://cur.cursors-4u.net/cursors/cur-2/cur116.cur'), auto; /* Premium Gaming Cursor */
}

body.modal-open {
    overflow: hidden; /* Prevent background scroll when overlays are active */
}

::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: #000; }
::-webkit-scrollbar-thumb { background: #1a1a1a; border-radius: 10px; }

/* --- 2. Stacking Contexts & Z-Index Safety --- */
#sidebar-nav, aside {
    isolation: isolate; /* Ensures icons stay inside their container and don't peek through overlays */
}

/* Blur effect for background elements when an overlay is active */
body.modal-open main,
body.modal-open #sidebar-nav,
body.modal-open aside {
    filter: blur(12px) grayscale(40%);
    opacity: 0.3;
    pointer-events: none;
    transition: all 0.5s ease;
}

/* --- 3. Gamified Animations (The Pulse & Glow) --- */

/* Button Neural Pulse (DualSense Haptic Metaphor) */
@keyframes buttonPulse {
    0% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.6); }
    70% { box-shadow: 0 0 0 12px rgba(37, 99, 235, 0); }
    100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); }
}

/* Card Boundary Glow */
@keyframes boundaryGlow {
    0%, 100% { border-color: rgba(255, 255, 255, 0.1); }
    50% { border-color: rgba(37, 99, 235, 0.8); box-shadow: 0 0 15px rgba(37, 99, 235, 0.3); }
}

/* PS Plus Golden Aura */
@keyframes goldPulse {
    0%, 100% { border-color: rgba(234, 179, 8, 0.2); }
    50% { border-color: rgba(234, 179, 8, 0.8); box-shadow: 0 0 25px rgba(234, 179, 8, 0.3); }
}

/* Progress Bar Shine */
@keyframes shine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

/* --- 4. Interactive Component Classes --- */

.btn-gamified:hover {
    animation: buttonPulse 1.5s infinite;
    transform: translateY(-2px) scale(1.02);
}

.game-card:hover {
    transform: translateY(-10px);
    background-color: rgba(255, 255, 255, 0.08);
    animation: boundaryGlow 2s infinite ease-in-out;
}

.ps-plus-card:hover {
    animation: goldPulse 2s infinite ease-in-out;
}

/* Progress Bar (XP System) */
#xp-bar {
    background: linear-gradient(90deg, #2563eb, #60a5fa);
    position: relative;
    overflow: hidden;
}

#xp-bar::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    animation: shine 2s infinite;
}

/* --- 5. Page Transitions & Overlays --- */

#expanded-store, #achievement-page, #community-page {
    transition: transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
    background: rgba(2, 2, 2, 0.98);
    backdrop-filter: blur(20px);
}

/* State: Sliding in from Right/Bottom */
.active-page {
    transform: translate(0, 0) !important;
}

/* AI Discovery Hover Overlay */
.ai-hover-overlay {
    position: absolute;
    inset: 0;
    z-index: 20;
    background: rgba(2, 6, 30, 0.96);
    backdrop-filter: blur(12px);
    padding: 24px;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    border-radius: 32px;
    transform: translateY(102%); /* Hidden below */
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1);
}

.group:hover .ai-hover-overlay {
    transform: translateY(0);
    opacity: 1;
}

/* --- 6. GitHub-style Heatmap Grid --- */

#playtime-heatmap {
    grid-template-columns: repeat(52, 1fr); /* 52 weeks in a year */
}

.day-sq {
    width: 14px;
    height: 14px;
    border-radius: 2px;
    transition: transform 0.2s, box-shadow 0.2s;
}

.day-sq:hover {
    transform: scale(1.6);
    z-index: 50;
    box-shadow: 0 0 10px #3b82f6;
}

/* Vertical timeline node pulse */
@keyframes nodePulse {
    0%, 100% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.2); opacity: 0.8; box-shadow: 0 0 20px #2563eb; }
}

#achievement-timeline > div:first-child .w-6 {
    animation: nodePulse 2s infinite ease-in-out;
}